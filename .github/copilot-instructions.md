# 指导 GitHub Copilot - OSC-YALAB 项目

欢迎来到 OSC-YALAB！这是一个用于学习和实验现代 Go 微服务技术栈的后端项目。

**核心目标**: 通过最简单、最直接的实现，来验证和学习一套现代化的 Go 微服务技术栈和相关的数据架构模式。代码的清晰度和对设计模式的典型诠释，优先于复杂的业务逻辑。

为了让你能高效地协助开发，请严格遵循以下核心准则和架构模式。

## 1. 核心技术栈

本项目严格遵循以下技术选型。你生成的所有代码都必须基于此技术栈：

- **微服务框架**: **Kratos (v2)**，用于构建 gRPC 和 HTTP 服务。
- **数据库与 ORM**: **PostgreSQL** 与 **GORM**。
- **缓存**: 使用 `gocache/v3` 作为统一抽象。
  - **L1 本地缓存**: Ristretto
  - **L2 分布式缓存**: Memcached
- **异步架构**:
  - **消息队列**: Apache Kafka (`segmentio/kafka-go` 客户端)
  - **CDC**: Debezium，用于捕获 PostgreSQL 的数据变更。
  - **流处理**: Apache Flink，用于处理来自 Debezium 的事件。
- **依赖注入**: 使用 `google/wire` 在 `cmd/{project-name}/wire.go` 中管理依赖。
- **API 定义**: 所有 API 均使用 Protobuf (`.proto` 文件) 进行定义。

## 2. 核心架构原则：缓存模式【**最高优先级规则**】

这是本项目最重要的规则。在修改任何数据写入逻辑（尤其是在 `internal/data` 层）时，你**必须**首先判断它属于哪种缓存模式，并严格遵守其规则。

- **模式一：同步旁路缓存**：应用代码中包含明确的缓存失效逻辑 (`gocache.Delete`)。你的任务是**维持“先写库，再删缓存”**的顺序。
- **模式二：异步缓存失效**：应用代码中**只有数据库操作**。你的任务是**严禁在应用代码中添加任何缓存失效逻辑**。

**详细说明**: [查看详细的缓存模式规则](./instructions/patterns.instructions.md)

## 3. 代码风格与注释规范【**强制性规则**】

你生成的所有 Go 代码都必须符合以下标准：

1.  **注释**: 所有公开的成员（包、类型、函数、方法）**必须**有符合 `godoc` 规范的注释。注释必须以被注释的成员名开头。
2.  **格式化**: 所有代码在最终生成时，**必须**是经过 `goimports` 格式化后的结果。

**详细说明**: [查看详细的代码风格指南](./instructions/style-guide.instructions.md)

## 4. 开发工作流【**必须遵守的流程**】

在执行特定任务时，你必须遵守以下工作流程：

- **API 或依赖变更**: 当你修改了任何 `.proto` 文件或 `wire.go` 文件后，你必须提示用户需要在项目根目录下运行 `go generate ./...` 命令。

**详细说明**: [查看详细的开发工作流命令](./instructions/workflow.instructions.md)